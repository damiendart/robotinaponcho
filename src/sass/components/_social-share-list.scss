// Copyright (C) 2022 Damien Dart, <damiendart@pobox.com>.
// This file is distributed under the MIT licence. For more information,
// please refer to the accompanying "LICENCE" file

@use "sass:math";
@use "../variables";
@use "../../../node_modules/toolbox-sass";

.social-share-list {
  display: flex;
  flex-direction: row;
  justify-content: center;
  line-height: 0;
  list-style: none;
  margin: 0;
  padding: 0;

  &__item {
    margin: 0 0 0 variables.$base-line-height;
    padding: 0;

    &:first-child {
      margin: 0;
    }

    &--permalink {
      a {
        position: relative;

        &::after {
          background: variables.$colour-black-50 url("icon-check.svg") no-repeat center;
          background-size: variables.$base-line-height * 1.25;
          content: "";
          display: inline-block;
          height: variables.$base-line-height * 1.5;
          left: 0;
          opacity: 0;
          position: absolute;
          top: 0;
          transition: opacity 0.125s ease;
          width: variables.$base-line-height * 1.5;

          @supports (mask: url("icon-check.svg")) {
            background: variables.$colour-black-1000;
            background: var(--base-foreground);
            mask: url("icon-check.svg") no-repeat center;
            mask-size: variables.$base-line-height * 1.25;
          }
        }

        &::before {
          background: url("icon-copy.svg");

          @supports (mask: url("icon-copy.svg")) {
            mask: url("icon-copy.svg");
          }
        }

        &.clipboard-success {
          &::after {
            opacity: 1;
          }

          &::before {
            opacity: 0;
          }
        }
      }
    }

    &--facebook {
      a {
        &::before {
          background: url("icon-facebook.svg");

          @supports (mask: url("icon-facebook.svg")) {
            mask: url("icon-facebook.svg");
          }
        }
      }
    }

    &--twitter {
      a {
        &::before {
          background: url("icon-twitter.svg");

          @supports (mask: url("icon-twitter.svg")) {
            mask: url("icon-twitter.svg");
          }
        }
      }
    }

    a {
      display: block;

      &::before {
        background-position: center;
        background-repeat: no-repeat;
        background-size: variables.$base-line-height;
        content: "";
        display: inline-block;
        height: variables.$base-line-height * 1.5;
        mask-position: center;
        mask-repeat: no-repeat;
        mask-size: variables.$base-line-height;
        transition: background-size 0.125s ease, mask-size 0.125s ease, opacity 0.125s ease;
        width: variables.$base-line-height * 1.5;

        @supports (mask: url("icon-check.svg")) {
          background: variables.$colour-black-1000;
          background: var(--base-foreground);
        }
      }

      &:focus,
      &:hover {
        &::before {
          mask-size: variables.$base-line-height * 1.25;
        }
      }

      @media (hover: none) {
        &:focus,
        &:hover {
          &::before {
            background-size: variables.$base-line-height;
          }
        }
      }
    }

    span {
      @include toolbox-sass.screen-reader-only;
    }
  }
}

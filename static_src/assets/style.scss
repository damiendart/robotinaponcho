// Copyright (C) 2020 Damien Dart, <damiendart@pobox.com>.
// This file is distributed under the MIT licence. For more information,
// please refer to the accompanying "LICENCE" file.

@use "node_modules/toolbox-sass";

$base-border-width: toolbox-sass.$base-one-pixel-in-rem * 2;
$base-font-size: 18px;
$base-line-height: (30px / 16px) * 1rem;
$colour-black: #000000;
$colour-blue: #0984e3;
$colour-flippywindow-blue: #65b3eb;
$colour-gray: #dddddd;
$colour-gray-light: #eeeeee;
$colour-gray-lighter: #f9f9f9;
$colour-green: #55efc4;
$colour-itchio-pink: #fa5c5c;
$colour-orange: #fdcb6e;
$colour-white: #ffffff;
$content-width: 40rem;

@mixin focus-ring($colour: currentColor, $boxShadow: false) {
  &:focus {
    @if ($boxShadow) {
      box-shadow: 0 0 0 (toolbox-sass.$base-one-pixel-in-rem * 4) $colour;
      outline: none;
    } @else {
      outline: $base-border-width solid $colour;
    }

    // Combining selectors that use ":focus-visible" and
    // ":-moz-focusring" causes some browsers to ignore the rule set.
    &:not(:focus-visible) {
      outline: initial;
      box-shadow: none;
    }

    &:not(:-moz-focusring) {
      box-shadow: none;
      outline: initial;
    }
  }

  &:focus-visible {
    @if ($boxShadow) {
      box-shadow: 0 0 0 (toolbox-sass.$base-one-pixel-in-rem * 4) $colour;
      outline: none;
    } @else {
      outline: $base-border-width solid $colour;
    }
  }

  &:-moz-focusring {
    @if ($boxShadow) {
      box-shadow: 0 0 0 (toolbox-sass.$base-one-pixel-in-rem * 4) $colour;
      outline: none;
    } @else {
      outline: $base-border-width solid $colour;
    }
  }
}

@font-face {
  font-display: swap;
  font-family: "Greycliff";
  font-style:  normal;
  font-weight: 400;
  src: url("greycliff-regular.woff2") format("woff2");
}

@font-face {
  font-display: swap;
  font-family: "Greycliff";
  font-style:  italic;
  font-weight: 400;
  src: url("greycliff-oblique.woff2") format("woff2");
}

@font-face {
  font-display: swap;
  font-family: "Greycliff";
  font-style:  normal;
  font-weight: 700;
  src: url("greycliff-bold.woff2") format("woff2");
}

@font-face {
  font-display: swap;
  font-family: "Iosevka Web";
  font-stretch: normal;
  font-style: normal;
  font-weight: 400;
  src: url("iosevka-regular.woff2") format("woff2");
}

@font-face {
  font-display: swap;
  font-family: "Iosevka Web";
  font-stretch: normal;
  font-style: italic;
  font-weight: 400;
  src: url("iosevka-italic.woff2") format("woff2");
}

@font-face {
  font-display: swap;
  font-family: "Iosevka Web";
  font-stretch: normal;
  font-style: normal;
  font-weight: 700;
  src: url("iosevka-bold.woff2") format("woff2");
}

a {
  @include focus-ring;

  color: $colour-blue;
  font-weight: bold;
  text-decoration: underline $colour-gray;
  text-decoration-thickness: $base-border-width !important;

  &:active,
  &:focus,
  &:hover {
    text-decoration-color: currentColor;
  }
}

body {
  @include toolbox-sass.nice-font-rendering;

  background: $colour-gray-lighter;
  color: $colour-black;
  font-size: percentage($base-font-size / 16px);
  font-family: "Greycliff", toolbox-sass.$font-stack-system;
  line-height: $base-line-height;
  margin: 0;
}

code {
  background: $colour-gray-light;
  font-family: "Iosevka Web", monospace;
  font-size: 96%;
  line-height: 1;
}

figure {
  @media #{toolbox-sass.$media-small-down} {
    -webkit-overflow-scrolling: touch;
    overflow-x: auto;
    overflow-y: hidden;
    position: relative;
  }

  > *:last-child {
    position: relative;

    &::after {
      @media #{toolbox-sass.$media-small-down} {
        content: "";
        display: block;
        height: toolbox-sass.$base-one-pixel-in-rem;
        position: absolute;
        right: $base-line-height * -1;
        width: $base-line-height;
      }
    }
  }
}

h1 {
  font-size: 200%;
  line-height: $base-line-height * 1.5;
  margin: $base-line-height * 3 0;
  text-align: center;

  @media #{toolbox-sass.$media-medium-up} {
    font-size: 300%;
    line-height: $base-line-height * 2;
  }
}

h2 {
  font-size: 150%;
  line-height: $base-line-height * 1.25;
  margin: ($base-line-height * 2.75) 0 0 0;
}

h3 {
  font-size: 112.5%;
  line-height: $base-line-height;
  margin: $base-line-height 0 0 0;
}

html {
  font-size: percentage(16px / $base-font-size);

  @media #{toolbox-sass.$media-small-up} {
    font-size: 100%;
  }
}

img {
  height: auto;
  max-width: 100%;
}

kbd {
  background: $colour-gray-light;
  border-radius: $base-line-height / 4;
  font-size: 87.5%;
  font-family: inherit;
  line-height: 1;
  padding: $base-line-height / 4;
}

main {
  // Makes the "main" element behave correctly in Internet Explorer 11.
  display: block;
}

ol {
  margin: ($base-line-height / 2) 0 0 0;
  padding: 0;

  & > * {
    margin: 0 0 0 $base-line-height;
    padding: 0;

    & > ul, & > ol {
      margin: 0;
    }
  }
}

p {
  margin: ($base-line-height / 2) 0 0 0;
}

pre {
  $full-breakpoint: $content-width + $base-line-height * 2.5;

  background: $colour-gray-light;
  box-sizing: border-box;
  margin: ($base-line-height / 2) 0 0;
  max-width: $content-width;
  overflow-x: scroll;
  position: relative;
  padding: ($base-line-height / 2) $base-line-height;

  @media screen and (min-width: #{$full-breakpoint}) {
    margin: ($base-line-height / 2) auto 0;
    max-width: $content-width + ($base-line-height * 2);
  }

  code {
    display: block;
    line-height: $base-line-height;
    position: relative;

    &::after {
      content: "";
      display: inline-block;
      height: 100%;
      left: 100%;
      top: 0;
      width: $base-line-height;
    }
  }
}

table {
  margin: ($base-line-height / 2) 0 0 0;
  border-collapse: collapse;
  width: 100%;

  > :not(caption) > * > * {
    padding: $base-line-height / 4;
  }

  > tbody > tr:nth-last-of-type(odd) {
    background: $colour-gray-light;
  }

  > thead {
    vertical-align: bottom;

    > * > * {
      border-bottom: $colour-black solid $base-border-width;
      padding-bottom: (($base-line-height / 4) - $base-border-width);
      padding-top: 0;
    }
  }
}

ul {
  margin: ($base-line-height / 2) 0 0 0;
  padding: 0;

  & > * {
    margin: 0 0 0 $base-line-height;
    padding: 0;

    & > ul, & > ol {
      margin: 0;
    }
  }
}

.admonition {
  $full-breakpoint: $content-width + $base-line-height * 2.5;

  background: $colour-white;
  border-style: solid;
  border-width: $base-border-width;
  border-left-width: $base-line-height;
  border-radius: $base-line-height / 2;
  box-sizing: border-box;
  margin: $base-line-height ($base-line-height / 2);
  max-width: $content-width;
  position: relative;
  padding: $base-line-height - $base-border-width;
  padding-left: $base-line-height;

  > *:first-child {
    margin: 0;
  }

  &::before {
    @media screen and (min-width: #{$full-breakpoint}) {
      background-position: center;
      background-repeat: no-repeat;
      background-size: 100%;
      content: "";
      display: block;
      height: $base-line-height * 2;
      left: $base-line-height * -2.5;
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      width: $base-line-height * 2;
    }
  }

  &--colouring-book {
    border-color: $colour-green;

    &::before {
      background-image: url("/assets/icon-download.svg");
    }

    @media screen and (min-width: #{$full-breakpoint}) {
      border-left-width: $base-line-height * 8 !important;

      &::before {
        display: none;
      }
    }
  }

  &--info {
    border-color: $colour-orange;

    &:before {
      background-image: url("/assets/icon-info.svg");
    }
  }

  &--metadata {
    border-color: $colour-gray;

    &:before {
      background-image: url("/assets/icon-help.svg");
    }
  }

  &__colouring-book-samples {
    display: none;

    &__heading {
      display: none;
    }

    @media screen and (min-width: #{$full-breakpoint}) {
      bottom: $base-border-width * -1;
      display: block;
      height: calc(100% + #{$base-border-width * 2});
      left: $base-line-height * -9;
      overflow: hidden;
      position: absolute;
      width: $base-line-height * 10;

      &__sample {
        $sheet-width: $base-line-height * 6;

        top: -10%;
        box-shadow: 0 0 ($base-line-height / 2) rgba(0, 0, 0, 0.1);
        background: $colour-white;
        display: block;
        height: $sheet-width * 1.41429;
        left: 50%;
        position: absolute;
        transform: translateX(-50%) rotate(-2deg);
        width: $sheet-width;

        &--2 {
          top: 20%;
          transform: translateX(-50%) rotate(5deg);
        }

        &--3 {
          top: 40%;
          transform: translateX(-50%) rotate(-3deg);
        }

        &--4 {
          top: 60%;
          transform: translateX(-50%) rotate(4deg);
        }
      }
    }
  }

  @media #{toolbox-sass.$media-small-up} {
    margin: $base-line-height;
  }

  @media screen and (min-width: #{$full-breakpoint}) {
    border-left-width: $base-line-height * 3;
    margin: $base-line-height auto;
    max-width: $content-width + ($base-line-height * 2);
    padding-left: $base-line-height;
  }
}

.anchor {
  position: absolute;
  margin: ($base-line-height * -2) 0 0;
  visibility: hidden;

  @media #{toolbox-sass.$media-ie-11} {
    margin: ($base-line-height * 1.5) 0 0;
  }
}

.button {
  @include focus-ring($colour-blue, true);

  background: $colour-blue;
  color: $colour-white;
  display: inline-block;
  font-weight: bold;
  padding: ($base-line-height / 2) $base-line-height;
  position: relative;
  border-radius: $base-line-height;
  text-decoration: none;
  white-space: nowrap;

  &:hover {
    text-decoration: underline;
  }

  &--back {
    background: $colour-white;
    border: $base-border-width solid $colour-gray;
    color: $colour-blue;
    padding:
      ($base-line-height / 8)
      ($base-line-height * 0.375)
      ($base-line-height / 8)
      ($base-line-height * 1.75);

    &::before {
      background: url("icon-arrow-left.svg") center no-repeat;
      background-size: cover;
      content: "";
      display: block;
      height: $base-line-height;
      left: $base-line-height * 0.375;
      position: absolute;
      top: ($base-line-height / 8);
      width: $base-line-height;
    }
  }

  &--clipboard {
    &::before {
      background: inherit;
      content: "Copied!";
      left: $base-line-height;
      opacity: 0;
      padding: ($base-line-height / 2) 0;
      position: absolute;
      right: $base-line-height;
      text-align: center;
      top: 0;
      transition: opacity 0.125s ease-out;
    }

    &.clipboard-success {
      &::before {
        opacity: 1;
      }
    }
  }

  &--inverse {
    background: $colour-white;
    border: $base-border-width solid $colour-gray;
    color: $colour-blue;
    padding: (($base-line-height / 2) - $base-border-width)
      ($base-line-height - $base-border-width);
  }

  &--itchio {
    background: $colour-itchio-pink;
    color: $colour-white;
  }

  img {
    height: $base-line-height;
    vertical-align: bottom;
  }

  &__download {
    @media #{toolbox-sass.$media-small-only} {
      &::after {
        content: ":";
      }
    }
  }
}

.button-list {
  display: flex;
  flex-wrap: wrap;
  list-style: none;
  margin-top: $base-line-height * 0.75;

  li {
    display: flex;
    margin: ($base-line-height / 4) ($base-line-height / 4) 0 0;
    padding: 0;
  }
}

.collapsible {
  &--x-small-down {
    @media #{toolbox-sass.$media-x-small-down} {
      display: none;
    }
  }

  &--small-down {
    @media #{toolbox-sass.$media-small-down} {
      display: none;
    }
  }

  &--medium-down {
    @media #{toolbox-sass.$media-medium-down} {
      display: none;
    }
  }
}

.download {
  margin: $base-line-height * 3 0;
  text-align: center;
  padding: 0 $base-line-height;

  &__link {
    line-height: $base-line-height;
    margin: 0;
  }

  &__information-list {
    list-style: none;
    margin: $base-line-height / 2 0 0 0;

    & > * {
      margin: 0;
    }
  }
}

.dropdown-menu {
  $animation-duration: 0.125s;
  $border-radius: $base-line-height / 4;

  border-radius: $border-radius $border-radius 0 0;
  cursor: default;
  display: inline-block;
  position: relative;

  @media (hover: hover) {
    // Pre-Blink Microsoft Edge and Internet Explorer do not support the
    // ":focus-within" pseudo-class; if we include the pseudo-class in a
    // group of selectors those browsers ignore the rule set.
    &:focus-within > &__lists {
      opacity: 1;
      right: $base-line-height / -2;
      transform: none;

      &::before {
        transform: translateY(
            ($base-line-height * -0.3125) + toolbox-sass.$base-one-pixel-in-rem
        );
        transition: transform $animation-duration ease-out;
        transition-delay: $animation-duration;
      }

      .dropdown-menu__lists__list__item {
        opacity: 1;
        transform: none;
      }
    }

    &:focus-within > &__title {
      opacity: 0.5;
    }

    &:hover > &__lists {
      opacity: 1;
      right: $base-line-height / -2;
      transform: none;

      &::before {
        transform: translateY(
          ($base-line-height * -0.3125) + toolbox-sass.$base-one-pixel-in-rem
        );
        transition: transform $animation-duration ease-out;
        transition-delay: $animation-duration;
      }

      .dropdown-menu__lists__list {
        &:last-child {
          @media #{toolbox-sass.$media-small-down} {
            @for $i from 1 through 10 {
              .dropdown-menu__lists__list__item:nth-child(#{$i}) {
                transition-delay: ($animation-duration * 1.75) + ($animation-duration / 4) * $i;
              }
            }
          }
        }
      }

      .dropdown-menu__lists__list__item {
        opacity: 1;
        transform: none;
        transition: opacity $animation-duration ease-out,
          transform $animation-duration ease-out;

        @for $i from 1 through 10 {
          &:nth-child(#{$i}) {
            transition-delay: ($animation-duration / 4) * $i;
          }
        }
      }
    }

    &:hover > &__title {
      opacity: 0.5;
    }
  }

  @media (hover: none) {
    &--open &__lists {
      opacity: 1;
      right: $base-line-height / -2;
      transform: none;

      &::before {
        transform: translateY(
            ($base-line-height * -0.3125) + toolbox-sass.$base-one-pixel-in-rem
        );
        transition: transform $animation-duration ease-out;
        transition-delay: $animation-duration;
      }

      .dropdown-menu__lists__list {
        &:last-child {
          @media #{toolbox-sass.$media-small-down} {
            @for $i from 1 through 10 {
              .dropdown-menu__lists__list__item:nth-child(#{$i}) {
                transition-delay: ($animation-duration * 1.5) + ($animation-duration / 4) * $i;
              }
            }
          }
        }
      }

      .dropdown-menu__lists__list__item {
        opacity: 1;
        transform: none;
        transition: opacity $animation-duration ease-out,
          transform $animation-duration ease-out;

        @for $i from 1 through 10 {
          &:nth-child(#{$i}) {
            transition-delay: ($animation-duration / 4) * $i;
          }
        }
      }
    }

    &--open &__title {
      opacity: 0.5;
    }

    @at-root {
      html:not(.javascript) & {
        margin: 0;
        padding: 0;
        width: 100%;

        &__title {
          display: none;
        }

        &__lists {
          background: transparent;
          border-radius: 0;
          box-shadow: none;
          color: $colour-black;
          columns: 1;
          float: none;
          left: 0;
          margin: $base-line-height 0 0 0;
          padding: 0;
          position: relative;
          opacity: 1;
          top: 0;
          transform: none;
          width: 100%;

          &::before {
            display: none;
          }

          &__list {
            &:first-child {
              margin: 0 0 ($base-line-height / 2);
            }

            &__item {
              opacity: 1;
              transform: none;
            }
          }
        }
      }
    }
  }

  // Internet Explorer 11 doesn't support interaction-related media
  // queries or SVG fragment identifiers.
  @media #{toolbox-sass.$media-ie-11} {
    &::after {
      $height: ($base-line-height * 1.25) * (14.14 / 22.13);

      // The chevron implementation is different for Internet Explorer
      // 11 because, by default, using SVGs for background images can
      // result in blurry backgrounds. For more information, see
      // <https://ctidd.com/2015/svg-background-scaling>.
      background: url("icon-chevron.svg") no-repeat center;
      background-size: cover;
      content: "";
      height: $height;
      position: absolute;
      right: $base-line-height * -0.3625;
      top: calc(50% - #{$height / 2});
      transform: scale(0.5);
      transition: opacity $animation-duration ease-out;
      transform-origin: center;
      width: $base-line-height * 1.25;
    }

    &__title {
      background: none !important;
    }

    &:hover > &__lists {
      opacity: 1;
      right: $base-line-height / -2;
      transform: none;

      .dropdown-menu__lists__list {
        &:last-child {
          @media #{toolbox-sass.$media-small-down} {
            @for $i from 1 through 10 {
              .dropdown-menu__lists__list__item:nth-child(#{$i}) {
                transition-delay: ($animation-duration * 1.5) + ($animation-duration / 4) * $i;
              }
            }
          }
        }
      }

      .dropdown-menu__lists__list__item {
        opacity: 1;
        // For Internet Explorer 11, setting the position property to a
        // value that isn't the default ("static") fixes a bug where an
        // item or two will sporadically disappear after the opacity
        // transition finishes. For more information (sorta), please see
        // <http://www.jacklmoore.com/notes/ie-opacity-inheritance/>.
        position: relative;
        transform: none;
        transition: opacity $animation-duration ease-out,
          transform $animation-duration ease-out;

        @for $i from 1 through 10 {
          &:nth-child(#{$i}) {
            transition-delay: ($animation-duration / 4) * $i;
          }
        }
      }
    }

    &:hover::after,
    &:hover > &__title {
      opacity: 0.5;
    }
  }

  &__title {
    background: url("icon-chevron.svg") no-repeat right center;
    background-size: $base-line-height * 0.625;
    background-position-x: 100%;
    font-size: 100%;
    font-weight: bold;
    line-height: $base-line-height;
    margin: 0;
    padding: 0 $base-line-height 0 0;
    position: relative;
    transition: opacity $animation-duration ease-out;

    // Improve the user experience of the dropdown menu by adding a
    // "pointer-movement path" from the hamburger icon to the far-left
    // list of links. For more information, see
    // <https://css-tricks.com/dropdown-menus-with-more-forgiving-mouse-movement-paths/>.
    &:hover::before {
      bottom: 0;
      content: "";
      display: block;
      height: 300%;
      position: absolute;
      right: 100%;
      top: 0;
      transform: rotate(-25deg);
      transform-origin: 100% 0;
      width: 135%;
      z-index: 1;

      @media #{toolbox-sass.$media-medium-up} {
        transform: rotate(-10deg);
        width: 325%;
      }
    }

    &:hover::after {
      content: "";
      display: block;
      height: calc(100% + #{$base-line-height});
      position: absolute;
      right: 0;
      top: 0;
      width: 100%;
    }
  }

  &__lists {
    background: $colour-black;
    box-shadow: 0 toolbox-sass.$base-one-pixel-in-rem toolbox-sass.$base-one-pixel-in-rem rgba($colour-black, 0.1),
      0 (toolbox-sass.$base-one-pixel-in-rem * 2) (toolbox-sass.$base-one-pixel-in-rem * 2) rgba($colour-black, 0.1),
      0 (toolbox-sass.$base-one-pixel-in-rem * 4) (toolbox-sass.$base-one-pixel-in-rem * 4) rgba($colour-black, 0.1),
      0 (toolbox-sass.$base-one-pixel-in-rem * 8) (toolbox-sass.$base-one-pixel-in-rem * 8) rgba($colour-black, 0.1),
      0 (toolbox-sass.$base-one-pixel-in-rem * 16) (toolbox-sass.$base-one-pixel-in-rem * 16) rgba($colour-black, 0.1);
    border-radius: $border-radius;
    color: $colour-white;
    opacity: 0;
    padding: $base-line-height;
    position: absolute;
    right: 9999px;
    top: calc(100% + #{$base-line-height / 2});
    transform: translateY($base-line-height / -3);
    transition: opacity $animation-duration ease-out,
      transform $animation-duration ease-out;
    z-index: 1;

    &::before {
      border-bottom: ($base-line-height * 0.3125) solid black;
      border-left: ($base-line-height * 0.3125) solid transparent;
      border-right: ($base-line-height * 0.3125) solid transparent;
      content: "";
      display: block;
      height: 0;
      position: absolute;
      right: ($base-line-height / 2);
      top: 0;
      width: 0;
    }

    @media #{toolbox-sass.$media-medium-up} {
      columns: 2;
      column-gap: $base-line-height;
    }

    @media (hover: none) {
      @at-root {
        html:not(.javascript) & {
          right: 0;
        }
      }
    }

    &__list {
      break-inside: avoid;
      // This ensures that each list keeps to its own column in all
      // supported browsers.
      display: inline-table;
      list-style: none;
      margin: 0 0 ($base-line-height / 2) 0;
      white-space: pre;

      @media #{toolbox-sass.$media-medium-up} {
        margin: 0;
      }

      &:last-child {
        // This removes extra unwanted empty space from the bottom of
        // the dropdown in pre-Blink Microsoft Edge, because reasons.
        display: table;
        margin: 0;
      }

      &__item {
        opacity: 0;
        margin: 0;
        padding: 0;
        transform: translateX($base-line-height / -2);
        transition-delay: 0s;
        transition-duration: 0s;
      }
    }
  }
}

.footer {
  border-top: $base-border-width solid $colour-gray;
  margin: ($base-line-height * 3) auto 0;
  padding:
    ($base-line-height - $base-border-width)
    $base-line-height
    $base-line-height;
  text-align: center;

  &__copyright {
    margin: 0;

    a {
      white-space: pre;
    }
  }

  &__rule {
    display: none;
  }
}

.flippywindow-introduction {
  background: url("/flippywindow/background.svg"), $colour-flippywindow-blue;
  background-size: cover;
  color: $colour-white;
  padding: ($base-line-height * 3) $base-line-height;

  a {
    color: inherit;
    text-decoration-color: currentColor;

    &:focus {
      outline-color: $colour-white;
    }
  }

  .introductory-blurb {
    &:first-child {
      margin: 0;
    }
  }

  &__screenshot-with-arrow {
    position: relative;
    margin: $base-line-height auto 0;
    max-width: 776px; // width of screenshot.

    &:after {
      background: url("/flippywindow/arrow.png") no-repeat 81% top;
      background-size: contain;
      content: "";
      display: block;
      height: percentage(301 / 557);
      position: absolute;
      top: $base-line-height / -2;
      width: 100%;

      @media
        only screen and (-webkit-device-pixel-ratio: 2),
        only screen and (min-resolution: 192dpi)
      {
        background-image: url("/flippywindow/arrow@2x.png");
      }
    }

    img {
      display: block;
    }
  }

  &__title {
    margin: 0 0 ($base-line-height * 3) 0;
  }
}

.header {
  @include toolbox-sass.clearfix;

  background: $colour-white;
  box-sizing: border-box;
  padding: $base-line-height;
  position: sticky;
  top: 0;
  transition: box-shadow 0.25s ease-in, transform 0.5s ease;
  margin: 0 0 (toolbox-sass.$base-one-pixel-in-rem * -1);
  width: 100%;
  z-index: 1;

  @media print {
    position: relative;
  }

  html:not(.javascript) & {
    position: relative;
  }

  &--shadow {
    box-shadow: 0 0 $base-line-height rgba(0, 0, 0, 0.1);
  }

  &--slide-up {
    @supports (position: sticky) {
      @media #{toolbox-sass.$media-medium-down} {
        box-shadow: none;
        transform: translateY(-100%);
      }
    }
  }

  a {
    text-decoration: none;
    color: inherit;

    &:focus, &:hover {
      text-decoration: underline;
    }
  }

  &__title {
    float: left;
    font-size: 125%;
    line-height: $base-line-height;
    margin: 0;

    @media #{toolbox-sass.$media-small-up} {
      font-size: 150%;
    }
  }

  &__navigation {
    float: right;
  }

  &__rule {
    display: none;
  }
}

.introductory-blurb {
  font-size: 150%;
  font-weight: bold;
  line-height: $base-line-height * 1.25;
  margin: $base-line-height auto 0;
  max-width: $content-width;
  text-align: center;

  @media #{toolbox-sass.$media-medium-up} {
    line-height: $base-line-height * 1.5;
  }

  @media #{toolbox-sass.$media-large-up} {
    padding: 0 ($base-line-height * 2);
  }
}

.main-content {
  & > *:not(div):not(pre) {
    margin-left: auto;
    margin-right: auto;
    max-width: $content-width;
    padding-left: $base-line-height;
    padding-right: $base-line-height;

    @media #{toolbox-sass.$media-large-up} {
      padding-left: $base-line-height * 2;
      padding-right: $base-line-height * 2;
    }
  }
}

.metadata-list {
  list-style: none;

  &__item {
    margin: 0 0 0 $base-line-height;
    text-indent: $base-line-height * -1;

    a[data-timestamp] {
      white-space: pre;
    }
  }
}

.notes-list {
  list-style: none;
  margin: ($base-line-height * 3) 0 0;
  padding: 0;

  &__item {
    display: flex;
    justify-content: space-between;
    margin: 0;
    padding: (($base-line-height / 4) - ($base-border-width / 2)) 0;

    &:first-child {
      padding-top: 0;
    }

    &:last-child {
      padding-bottom: 0;
    }

    &:hover {
      .notes-list__item__meta__created {
        opacity: 1;
      }
    }

    & + & {
      border-top: $base-border-width solid $colour-gray;
    }

    &__meta {
      flex-shrink: 0;
      font-family: "Iosevka Web", monospace;
      font-size: 87.5%;
      margin: 0 0 0 ($base-line-height / 2);

      span:not(class) {
        @media #{toolbox-sass.$media-small-down} {
          display: none;
        }
      }
    }
  }
}

.os-menu-item {
  font-family: toolbox-sass.$font-stack-system;
  line-height: 1;
}

.robot-header {
  line-height: 0;
  max-width: 100% !important;
  position: relative;
}

.screen-reader-only {
  @include toolbox-sass.screen-reader-only;
}

.share {
  flex-direction: row;
  justify-content: center;
  margin: ($base-line-height * 3) auto 0;

  &__rule {
    display: none;
  }

  &__title {
    font-weight: bold;
    margin: 0;
    text-align: center;
  }

  .social-share-list {
    display: flex;
    flex-direction: row;
    justify-content: center;
    line-height: 0;
    list-style: none;
    margin: 0;
    padding: 0;

    &__item {
      margin: 0 0 0 $base-line-height;
      padding: 0;

      &:first-child {
        margin: 0;
      }

      &--permalink {
        a {
          position: relative;

          &::before {
            background: url("icon-copy-link.svg");
          }

          &::after {
            background: $colour-gray-lighter url("icon-check-link.svg") no-repeat center;
            background-size: $base-line-height * 1.25;
            content: "";
            display: inline-block;
            height: $base-line-height * 1.5;
            left: 0;
            opacity: 0;
            position: absolute;
            top: 0;
            transition: opacity 0.125s ease-out;
            width: $base-line-height * 1.5;
          }

          &.clipboard-success {
            &::after {
              opacity: 1;
            }
          }
        }
      }

      &--facebook {
        a {
          &::before {
            background: url("icon-facebook-link.svg");
          }
        }
      }

      &--twitter {
        a {
          &::before {
            background: url("icon-twitter-link.svg");
          }
        }
      }

      a {
        display: block;

        &::before {
          background-position: center;
          background-repeat: no-repeat;
          background-size: $base-line-height;
          content: "";
          display: inline-block;
          height: $base-line-height * 1.5;
          transition: background-size 0.125s ease-out;
          width: $base-line-height * 1.5;
        }

        &:focus,
        &:hover {
          &::before {
            background-size: $base-line-height * 1.25;
          }
        }

        @media (hover: none) {
          &:focus,
          &:hover {
            &::before {
              background-size: $base-line-height;
            }
          }
        }
      }

      span {
        display: none;
      }
    }
  }
}

.sub-navigation-list {
  justify-content: center;
  display: flex;
  flex-direction: row;
  list-style: none;
  margin: ($base-line-height * -2.5) 0 ($base-line-height * 3);
  padding: 0;

  &__item {
    padding: 0;
    margin: 0;
  }
}

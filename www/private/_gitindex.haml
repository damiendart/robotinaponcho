-# Git Repositories markup for Damien Dart's personal website.
-#
-# Copyright (C) 2013-2016 Damien Dart, <damiendart@pobox.com>.
-# This file is distributed under the MIT licence. For more information,
-# please refer to the accompanying "LICENCE" file.

!!! 5
%html{:lang => "en"}
  %head
    %meta{:charset => "utf-8"}
    %meta{:content => "initial-scale=1.0, maximum-scale=1.0, user-scalable=no, width=device-width", "name" => "viewport"}
    %title Damien Dart's Git Repositories
    :scss
      $commit-streak: true;
      $file-list-table: true;
      #{File.read(File.join(File.dirname(__FILE__), "public", "crap", "_index.scss"))}
  %body
    .container
      %h1.page-header Git Repositories
      %p.blurb This is a list of my open-source projects available using <a href="https://git-scm.com/">Git</a>. In addition to cloning them, you can also browse them with <a href="gitweb.cgi">Gitweb</a> and are also available on <a href="https://github.com/damiendart">GitHub</a>.
      %table.file-list-table
        %thead
          %tr.file-list-table__row
            %th.file-list-table__row__cell.file-list-table__row__cell--header<> Repository
            %th.file-list-table__row__cell.file-list-table__row__cell--header<> Last Commit
        %tbody
          / TMPL_LOOP NAME="repositories"
          %tr.file-list-table__row
            %td.file-list-table__row__cell<>
              %a{:href => "<TMPL_VAR NAME=\"uri\">", :title => "<TMPL_VAR NAME=\"description\">"} <TMPL_VAR NAME="repository">
            %td.file-list-table__row__cell
              %span{:data => {:timestamp => "<TMPL_VAR NAME=\"timestamp\">"}}<> <TMPL_VAR NAME="last_commit">
              &nbsp;(<a href="/git/gitweb.cgi?p=<TMPL_VAR NAME="repository">;h=<TMPL_VAR NAME="hash_long">" title="<TMPL_VAR NAME="last_commit_title">"><code><TMPL_VAR NAME="hash_short"></code></a>)
          / /TMPL_LOOP
      %p.commit-streak Current commit streak: <span class="commit-streak__streak<TMPL_VAR NAME="class">"><TMPL_VAR NAME="commit_streak"></span>
      %nav.navigation
        %a.navigation__link{:href => "\\"} &larr; Damien Dart's Personal Site
    :javascript
      #{`uglifyjs #{File.join(File.dirname(__FILE__), "public", "crap", "_index.js")} -c -m`}
